#!/usr/bin/env python3
# encoding: utf-8
#
# Copyright (c) 2008 Doug Hellmann All rights reserved.
#
""" """

# end_pymotw_header
import array
import binascii
import ctypes
import struct

s = struct.Struct("I 2s f")
values = (1, "ab".encode("utf-8"), 2.7)
print("Original:", values)

print()
print("ctypes string buffer")

b = ctypes.create_string_buffer(s.size)
print("Before  :", binascii.hexlify(b.raw))
s.pack_into(b, 0, *values)
print("After   :", binascii.hexlify(b.raw))
print("Unpacked:", s.unpack_from(b, 0))

print()
print("array")

a = array.array("b", b"\0" * s.size)
print("Before  :", binascii.hexlify(a))
s.pack_into(a, 0, *values)
print("After   :", binascii.hexlify(a))
print("Unpacked:", s.unpack_from(a, 0))
