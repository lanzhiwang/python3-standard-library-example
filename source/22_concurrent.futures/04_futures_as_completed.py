#!/usr/bin/env python3
# encoding: utf-8
#
# Copyright (c) 2016 Doug Hellmann.  All rights reserved.
# Written for https://pymotw.com
#
"""Running tasks in a managed group of threads."""

# end_pymotw_header
from concurrent import futures
import random
import time


def task(n):
    time.sleep(random.random())
    return (n, n / 10)


ex = futures.ThreadPoolExecutor(max_workers=5)
print("main: starting")

wait_for = [ex.submit(task, i) for i in range(5, 0, -1)]

for f in futures.as_completed(wait_for):
    print("main: result: {}".format(f.result()))

"""
main: starting
main: result: (5, 0.5)
main: result: (2, 0.2)
main: result: (3, 0.3)
main: result: (1, 0.1)
main: result: (4, 0.4)
"""
